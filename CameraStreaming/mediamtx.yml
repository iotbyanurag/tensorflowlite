###############################################
# Global settings

###############################################
# Global settings -> General

logLevel: warn
logDestinations: [stdout]

readTimeout: 10s
writeTimeout: 10s
writeQueueSize: 512
udpMaxPayloadSize: 1472

metrics: no
pprof: no

###############################################
# Global settings -> Authentication

authMethod: internal

authInternalUsers:
- user: any
  pass:
  ips: []
  permissions:
  - action: publish
    path:
  - action: read
    path:
  - action: playback
    path:
- user: any
  pass:
  ips: ['127.0.0.1', '::1']
  permissions:
  - action: api
  - action: metrics
  - action: pprof

###############################################
# Global settings -> API

api: no

###############################################
# Global settings -> Playback server

playback: no

###############################################
# Global settings -> RTSP server

rtsp: yes
protocols: [udp, multicast, tcp]
encryption: "no"
rtspAddress: :8554
rtspsAddress: :8322
rtpAddress: :8000
rtcpAddress: :8001
multicastIPRange: 224.1.0.0/16
multicastRTPPort: 8002
multicastRTCPPort: 8003
rtspAuthMethods: [basic]

###############################################
# Global settings -> RTMP server

rtmp: no

###############################################
# Global settings -> HLS server

hls: no

###############################################
# Global settings -> WebRTC server

webrtc: yes
webrtcAddress: :8889
webrtcEncryption: no
webrtcAllowOrigin: '*'
webrtcLocalUDPAddress: :8189
webrtcIPsFromInterfaces: yes

###############################################
# Global settings -> SRT server

srt: no

###############################################
# Default path settings

pathDefaults:
  source: publisher
  maxReaders: 0

###############################################
# Path settings

paths:
  cam1:
    runOnInit: bash -c 'rpicam-vid -t 0 --camera 0 --nopreview --codec yuv420 --width 1280 --height 720 --inline --listen -o - | ffmpeg -f rawvideo -pix_fmt yuv420p -s:v 1280x720 -i /dev/stdin -c:v libx264 -preset ultrafast -tune zerolatency -f rtsp rtsp://localhost:$RTSP_PORT/$MTX_PATH'
    runOnInitRestart: yes

  all_others:

